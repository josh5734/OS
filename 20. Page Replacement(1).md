## 0. 들어가면서
* 지난 시간에 가상 메모리의 기본적인 개념에 대해 공부했고, 한정된 Physical Memory에 많은 양의 Locial Memory를 load하기 위한 Demand paging 전략에 대해 살펴봤다.
* Demand Paging은 필요한 페이지만 RAM에 올려둠으로써 메모리 문제를 해결해준다고 기대했는데, 하지만 여기서 **Page fault** 문제가 필연적으로 발생할 수밖에 없다고 했다.
* 이번 시간에는 이러한 Page fault를 어떻게 핸들링할 것인가에 대해 Page Replacement 개념과 정책들에 대해 알아보겠다.
---

## 1. Page Replacement의 어려움
```
- Page fault를 핸들링하는 데 가장 어려운 점은 어떤 페이지를 Swap out할 것인가에 관한 문제다.
- 여기서 어떤 페이지를 Swap out할 것인가에 대한 기준은 미래에 Page fault를 최소로 일으키게 하는 녀석으로 생각할 수 있는데,
- 사실 미래에 프로세스가 어떻게 작동될 지 완벽한 예측을 할 수 없기 때문에 결코 쉬운 일은 아니다.
```
---

## 2. Page replacement Scheme
* 교과서에서는 아래와 같이 Page replacement에 대한 Basic Scheme을 정해두고 있다.
* 하지만 먼저 기억해야 될 점은 실제 OS는 이러한 방식을 그대로 따르지 않는다는 것이다.
```
- 실제 OS는 Background에서 항상 어느 정도의 빈 frame을 확보하기 위한 작업을 하고 있다.
- 이를 통해 Page fault가 일어날 때마다 일일이 Swap out하고 page table과 frame table을 바꾸는 overhead를 줄이려고 한다.
```
* 그렇다면 교과서에서 정하는 Basic Scheme은 어떤 것인지 아래 설명과 그림을 통해 살펴보자.
```
1. Find the location of the desired page on disk
2. Find a free frame:
    - if there is a free frame, use it
    - if there is no free frame, use a page replacement algorithm to select a victim frame
3. Read the desired page into the newly free frame
4. Update the page and frame tables
5. Restart the process
```

![image](https://user-images.githubusercontent.com/61929745/118434715-7bdb4d80-b718-11eb-8bc0-e5ea2645749a.png)   

* 위 그림을 보면 프로세스의 page f가 현재 physical memory에 올려져 있고, PC(Program Counter)는 그 다음 page를 가리키고 있다.
* PC가 가리키는 page가 physical memory에 없기 때문에 page fault가 일어나며, 이를 핸들링하기 위해 기존의 page f를 swap out하겠다고 결정한다(가정).
* 그러면 빈 free frame이 생기게 되고 거기에 현재 필요한 page를 load하고, page table의 present bit와 frame 정보를 업데이트한다.
* 위와 같은 과정을 통해 page replacement가 일어난다.
---
## 3. Page Replacement Algorithms
* Page Replacement가 어떻게 일어나는지는 크게 어렵지 않게 이해할 수 있다.
* 하지만 가장 큰 문제점은 **그래서 결국 어떤 페이지를 지금 Victim으로 쫓아낼 것이냐?** 를 결정하는 게 쉬운 일이 아니라는 것이다.
* 그래서 기본적으로는 앞으로 정말 오래 안 쓸 것 같은 Page를 Victim으로 쫓아내자는 아이디어(?)가 존재하게 되는데, Belady라는 사람이 실제로 가장 오래 안쓸 것 같은 페이지를 지금 쫓아내는 것이 미래에 Page Fault를 가장 적게 일으키는 것임을 증명하는 데 성공했다.
* 아무튼, 우리가 지금 알아보고자 하는 것은 어떤 녀석을 쫓아내야 Page fault rate이 최소가 될 것인가를 예측하는 것이고 이에 대한 여러 가지 정책을 아래에서 하나씩 살펴보도록 하자.
---

## 4.



